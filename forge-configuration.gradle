def findVersions(version) {
	def major_forge_version = 	[
						"1.15.2": "31",
						"1.16.1": "32",
						"1.16.2": "33",
						"1.16.3": "34",
						"1.16.4": "35",
						"1.16.5": "36",
						"1.17.1": "37"
					]
	def forge_minor_version = 	[
						"1.15.2": "2.30",
						"1.16.1": "0.108",
						"1.16.2": "0.61",
						"1.16.3": "1.42",
						"1.16.4": "1.37",
						"1.16.5": "1.30",
						"1.17.1": "0.2"
					]
	def mapping = 			[
						"1.15.2": "20200702-1.15.1",
						"1.16.1": "20200723-1.16.1",
						"1.16.2": "20200723-1.16.1",
						"1.16.3": "20201028-1.16.3",
						"1.16.4": "20201028-1.16.3",
						"1.16.5": "20210309-1.16.5",
						"1.17.1": "1.17.1"
					]
	def mapping_channel = 		[
						"1.15.2": "snapshot",
						"1.16.1": "snapshot",
						"1.16.2": "snapshot",
						"1.16.3": "snapshot",
						"1.16.4": "snapshot",
						"1.16.5": "snapshot",
						"1.17.1": "official"
					]	
						
	config.forge.major_version = major_forge_version."$version";
	config.forge.version = "$version" << "-" << major_forge_version."$version" << "." << forge_minor_version."$version";
	config.forge.mapping = mapping."$version";
	config.forge.mapping_channel = mapping_channel."$version";
}

def setupForge() {
	if(config.get("forge").get("mcversion") != null) {
		findVersions(config.forge.mcversion)
	}
}

def getForgeDependency() {
	return "net.minecraftforge:forge:$config.forge.version"
}

ext {
	setupForge = this.&setupForge
	getForgeDependency = this.&getForgeDependency
}
